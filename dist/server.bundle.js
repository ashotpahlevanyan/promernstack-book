!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=12)}([function(e,t){e.exports=require("mongodb")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return'<!DOCTYPE HTML>\n<html>\n<head>\n\t<meta charset="UTF-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t<title>Pro MERN Stack</title>\n  <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css">\n  <link rel="stylesheet" type="text/css" href="/node_modules/@fortawesome/fontawesome/styles.css">\n\t\x3c!--<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.13.0/polyfill.js"><\/script>--\x3e\n\n  <style>\n    .panel-title a {display: block; width: 100%; cursor: pointer; text-decoration: none;}\n    .header {border-bottom: 1px solid silver; margin-bottom: 20px;}\n    .footer {\n      border-top: 1px solid silver; padding-top: 5px; margin-top: 20px;\n      font-family: Helvetica; font-size: 10px; color: grey;\n    }\n    .table td {\n      vertical-align: middle;\n    }\n    .table td:last-child {\n      text-align: center;\n    }\n    .buttonsContainer .btn + .btn {\n      margin-left: 10px;\n    }\n\t</style>\n</head>\n<body>\n\t<div id="contents">'+e+"</div>\n\t<script>window.__INITIAL_STATE__ = "+JSON.stringify(t)+";<\/script>\n\t<script type='text/javascript' src=\"/vendor.js\"><\/script>\n\t<script type='text/javascript' src=\"/app.js\"><\/script>\n</body>\n</html>\n"}},function(e,t){e.exports=require("prop-types")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=i(n(1)),o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=Object.assign({},n.props),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({addressee:"Universe"})},100)}},{key:"render",value:function(){return s.default.createElement("h1",null,"Hello ",this.state.addressee,"!")}}]),t}();t.default=a,a.propTypes={addressee:o.default.string},a.defaultProps={addressee:""}},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),s=n(6),o=u(n(2)),i=u(n(5)),a=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=new o.default;c.get("*",function(e,t){var n={addressee:"Universe"},o=(0,s.renderToString)(r.default.createElement(i.default,n));t.send((0,a.default)(o,n))}),t.default=c},function(e,t,n){"use strict";var r={New:!0,Open:!0,Assigned:!0,Fixed:!0,Verified:!0,Closed:!0},s={status:"required",owner:"required",effort:"optional",created:"required",completionDate:"optional",title:"required"};function o(e){var t={};return Object.keys(e).forEach(function(n){s[n]&&(t[n]=e[n])}),t}e.exports={validateIssue:function(e){var t=[];return Object.keys(s).forEach(function(n){"required"!==s[n]||e[n]||t.push("Missing mandatory field: "+n)}),r[e.status]||t.push(e.status+" is not a valid status."),t.length?t.join("; "):null},cleanupIssue:o,convertIssue:function(e){return e.created&&(e.created=new Date(e.created)),e.completionDate&&(e.completionDate=new Date(e.completionDate)),o(e)}}},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("source-map-support")},function(e,t,n){"use strict";var r=u(n(11));n(10);var s=u(n(2)),o=u(n(9)),i=u(n(8)),a=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var c=n(0).MongoClient,l=n(0).ObjectID;r.default.install();var f=(0,s.default)();f.use(s.default.static("static")),f.use(o.default.json());var d=void 0;f.get("/api/issues",function(e,t){var n={};e.query.status&&(n.status=e.query.status),(e.query.effort_lte||e.query.effort_gte)&&(n.effort={}),e.query.effort_lte&&(n.effort.$lte=parseInt(e.query.effort_lte,10)),e.query.effort_gte&&(n.effort.$gte=parseInt(e.query.effort_gte,10)),d.collection("issues").find(n).toArray().then(function(e){var n={total_count:e.length};t.json({_metadata:n,records:e})}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})})}),f.post("/api/issues",function(e,t){var n=e.body;n.created=new Date,n.status||(n.status="New");var r=i.default.validateIssue(n);r?t.status(422).json({message:"Invalid request: "+r}):d.collection("issues").insertOne(i.default.cleanupIssue(n)).then(function(e){return d.collection("issues").find({_id:e.insertedId}).limit(1).next()}).then(function(e){t.json(e)}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server Error: "+e})})}),f.get("/api/issues/:id",function(e,t){var n=void 0;try{n=new l(e.params.id)}catch(e){return void t.status(422).json({message:"Invalid issue Id format: "+e})}d.collection("issues").find({_id:n}).limit(1).next().then(function(e){e?t.json(e):t.status(404).json({message:"No such issue: "+n})}).catch(function(e){console.log(e),t.status(500).json({message:"Internal Server error: "+e})})}),f.put("/api/issues/:id",function(e,t){var n=void 0;try{n=new l(e.params.id)}catch(e){return void t.status(422).json({message:"Invalid Issue ID format: "+e})}var r=e.body;delete r._id;var s=i.default.validateIssue(r);s?t.status(422).json({message:"Invalid request: "+s}):d.collection("issues").update({_id:n},i.default.convertIssue(r)).then(function(){return d.collection("issues").find({_id:n}).limit(1).next()}).then(function(e){t.json(e)}).catch(function(e){t.status(500).json({message:"Internal Server Error: "+e})})}),f.delete("/api/issues/:id",function(e,t){var n=void 0;try{n=new l(e.params.id)}catch(e){return void t.status(422).json({message:"Invalid issue ID format: "+e})}d.collection("issues").deleteOne({_id:n}).then(function(e){1===e.result.n?t.json({status:"OK"}):t.json({status:"Warning: object not found"})}).catch(function(e){console.log(e),t.status(500).json({message:"Internal server error: "+e})})}),f.use("/",a.default),c.connect("mongodb://localhost/issuetracker").then(function(e){d=e.db("issuetracker"),f.listen(3e3,function(){console.log("App started on port 3000")})}).catch(function(e){console.log("ERROR:",e)})}]));
//# sourceMappingURL=server.bundle.js.map